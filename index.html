<!doctype html>
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">

        <link rel="stylesheet" href="assets/css/bootstrap.min.css">

        <!--For Plugins external css-->
        <link rel="stylesheet" href="assets/css/plugins.css" />

        <!--Theme custom css -->
        <link rel="stylesheet" href="assets/css/style.css">

        <!--Theme Responsive css-->
        <link rel="stylesheet" href="assets/css/responsive.css">
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    </script>
    
    
    <!-- Styles -->	
    <style style="text/css">
    
    h2 {
        background-color: lightgrey;
        font-size: 150%;
        margin-left: 40px;
        margin-top: 30px;
        }
    h3 {
        background-color: lightgrey;
        font-size: 100%;
        margin-left: 40px;
        }
    p {
        background-color: white;
        font-size: 90%;
        margin-top: 40px;
        margin-bottom: 40px;
        margin-left: 40px;
        font: 14px helvetica;
        }
        
    <!--img { 
        width:100%; 
        margin-top: 30px;
        } 
     -->
        
    body {
        overflow:scroll;
        margin:0;
        font: 18px open-sans;
        }
    text {
        font-family: sans-serif;
        pointer-events: auto;
        }

    .chart { 
      background: #fff;
    }
    
    .axis path, .axis line {
      fill: none;
      stroke: #000;
      stroke-width: 2px;
      shape-rendering: crispEdges;
    }   
    .axis { font: 10px sans-serif; }

    button {
      position: absolute;
      right: 50px;
      top: 10px;
      border:1px solid red;
    }  
    
    #footer {
      font: 12px sans_serif;
      fill: lightgrey;
      width: 100%;
      height: auto;
      min-height: 10px;
      margin: 0px;
      padding: 0px;
      border: 0px solid #bbb;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
      border-top: solid #bbb;
    }
    
    .link line {
      stroke: #696969;
    }

    .link line.separator {
      stroke: #fff;
      stroke-width: 2px;
    }

    .node circle {
      stroke: #000;
      stroke-width: 1.5px;
    }

    .node text {
      font: 10px sans-serif;
      pointer-events: none;
    }
    
    .fa {
    padding: 10px;
    font-size: 20px;
    width: 30px;
    text-align: center;
    text-decoration: none;
    margin: 5px 2px;
    }

    /* Add a hover effect if you want */
    .fa:hover {
    opacity: 0.7;
    }
    
    .fa-linkedin {
    background: #007bb5;
    color: white;
    }
        
    </style>
    
    
    </head>
    <body>

    <div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="chart"> </div>
                <img class="profile-pic" src="ski_abay_selfie_crop.png" alt="HTML5 Icon" style="width:128px;height:128px;" align="left" hspace="40">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
        <header id="home" class="sections">
            <div class="container">

                <div class="row">
                    <div class="homepage-style">
                        <!-- Define page width for Desktop, Tablet, and Phone -->
                        <div class="col-md-10 col-sm-6 col-xs-12">
                            <div class="unique-apps">
                                <h2>&nbsp; Matt Wheeler
                                <br>&nbsp; Visualization | Web Analytics | Data Science</h2>
                                <h3>&nbsp; Passionate about drawing insights from data
                                    &nbsp;
                                    <a  target="_blank" href="https://www.linkedin.com/in/matthew-wheeler/" class="fa fa-linkedin"> </a>
                                    &nbsp;
                                    <a  target="_blank" href="https://public.tableau.com/profile/matt.wheeler#!/">
                                        <img src="public-logo-transparent-666.png" alt="HTML tutorial" style="height:20px;width:120px;border:0;">
                                    </a>
                                </h3>
                                <p>
                                    Interested in behavorial economics, evolutionary biology, genetics, AI research, and anything else where data 
                                    can be visualized.  I love playing with data in Tableau or D3. Usually pondering over literary works by Edward Tufte, 
                                    Daniel Kahneman, Dan Ariely, Richard Dawkins, Sean Carroll, and other deep thinkers.  
                                    <br>
                                    <br>

                                </p>    

                            </div>
                        </div>
                    </div>
                </div>
            </div>
         </header>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-10 col-sm-6 col-xs-12">
				<h3>Sample Tableau Viz</h3>
                  <div class="row">
                    <div class="col-sm-12">
                        <p>
							<div class='tableauPlaceholder' id='viz1521570674012' style='position: relative'><noscript>
							<a href='https:&#47;&#47;public.tableau.com&#47;profile&#47;matt.wheeler#!&#47;'><img alt='Powder Days at Vail ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Po&#47;PowderDaysatVail&#47;PowderDaysatVail&#47;1_rss.png' style='border: none' /></a>
							</noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
							<param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='PowderDaysatVail&#47;PowderDaysatVail' />
							<param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Po&#47;PowderDaysatVail&#47;PowderDaysatVail&#47;1.png' /> 
							<param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div>                
							<script type='text/javascript'>                    var divElement = document.getElementById('viz1521570674012');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='500px';vizElement.style.height='400px';                    
							var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                
							</script>
                      
							</a>						
                        </p> 
                    </div>
                  </div>
			
                <h3>My D3.js Playground</h3>
                  <div class="row">
                    <div class="col-sm-12">
                        <p>
                            <a target="_blank" href="https://datavizhokie.github.io/Twitter-FirstDayofFall/"> Twitter Stream of #FirstDayofFall Tweets </a>
                            <br>
                            <a target="_blank" href="https://datavizhokie.github.io/fridayfeel/"> Most Common Word Bubble Chart for #FridayFeel Tweets </a>
                            <br>
                            <a target="_blank" href="https://datavizhokie.github.io/ethanol-molecule/"> Force-Directed Ethanol Molecule</a> 
							<br>
                            <a target="_blank" href="https://datavizhokie.github.io/conf-hum-int/"> My Confidence/Humility/Intelligence Survey Results </a> 							
                        </p> 
                    </div>
                  </div>
                <h3>Amusing Links</h3>
                        <p>
                            <a target="_blank" href="http://www.infocaptor.com/bubble-my-page"> Word bubble any webpage</a>
                            &nbsp; <a target="_blank" href="http://flowingdata.com/"> FlowingData</a>
                            &nbsp; <a target="_blank" href="https://www.ventusky.com"> Ventusky Meteorlogical Data Viz</a>   
                            &nbsp; <a target="_blank" href = "https://bl.ocks.org/mbostock/c034d66572fd6bd6815a"> Phylogenetic Tree of the Bacterial Domain</a>
                         </p>                        
                    </div>
                  </div>
            </div>
        </div>
    </div>
    </div>  
  
  <!--<div id="footer">
    <div>
        <p> Copyright &copy MsW 2017
        </p>
    </div>
   </div>-->
  </div>
</div>


<!-- Streamgraph -->
<script src="d3.v3.min.js"></script>
<div class="chart">
</div>

<script>

chart("tech_stocks_1yr.csv", "blue");

var datearray = [];
var colorrange = [];

function chart(csvpath, color) {

if (color == "blue") {
  colorrange = ["#045A8D", "#2B8CBE", "#74A9CF", "#A6BDDB", "#D0D1E6", "#F1EEF6"];
}
else if (color == "pink") {
  colorrange = ["#980043", "#DD1C77", "#DF65B0", "#C994C7", "#D4B9DA", "#F1EEF6"];
}
else if (color == "orange") {
  colorrange = ["#B30000", "#E34A33", "#FC8D59", "#FDBB84", "#FDD49E", "#FEF0D9"];
}
strokecolor = colorrange[0];

var format = d3.time.format("%m/%d/%y");

//define your year format here, first for the x scale, then if the date is displayed in tooltips
//var parseDate = d3.time.format("%m/%d/%y").parse;
var formatDate = d3.time.format("%b %d, '%y");
var formatDecimalComma = d3.format(",.2f");
var formatComma = d3.format(",.0f");
var formatMoney = function(d) { return "$" + formatDecimalComma(d); };

var margin = {top: 20, right: 450, bottom: 70, left: 50};
var width = document.body.clientWidth - margin.left - margin.right;
var height = 400 - margin.top - margin.bottom;

var tooltip = d3.select("body")
    .append("div")
    .attr("class", "remove")
    .style("position", "absolute")
    .style("z-index", "10")
    .style("visibility", "hidden")
    .style("top", "1000px")
    .style("left", "150px")
    .style("opacity", 1);

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height-10, 0]);

var z = d3.scale.ordinal()
    .range(colorrange);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .ticks(d3.time.months);

var yAxis = d3.svg.axis()
    .scale(y)
    .tickFormat(function(d) { return "$" + formatComma(d); });
    
//var yAxisr = d3.svg.axis()
 //   .scale(y)
   // .tickFormat(function(d) { return "$" + formatDecimalComma(d); });

var stack = d3.layout.stack()
    .offset("silhouette")
    .values(function(d) { return d.values; })
    .x(function(d) { return d.date; })
    .y(function(d) { return d.value; });

var nest = d3.nest()
    .key(function(d) { return d.key; });

var area = d3.svg.area()
    .interpolate("cardinal")
    .x(function(d) { return x(d.date); })
    .y0(function(d) { return y(d.y0); })
    .y1(function(d) { return y(d.y0 + d.y); });

var svg2 = d3.select("#area2").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    
svg2.append("text")
    .attr("x", width/2)
    .attr("y", -7)
    .style("text-anchor", "middle")
    .style("fill","darkblue")
    .text("1yr Streamgraph of Tech Stocks (NFLX, FB, GOOG, AMZN, APPL)");

var graph = d3.csv(csvpath, function(data) {
  data.forEach(function(d) {
    d.date = format.parse(d.date);
    d.value = +d.value;
  });

  var layers = stack(nest.entries(data));

  x.domain(d3.extent(data, function(d) { return d.date; }));
  y.domain([0, d3.max(data, function(d) { return d.y0 + d.y; })]);

  svg2.selectAll(".layer")
      .data(layers)
    .enter().append("path")
      .attr("class", "layer")
      .attr("d", function(d) { return area(d.values); })
      .style("fill", function(d, i) { return z(i); });

  svg2.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg2.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(" + width + ", 0)")
      .call(yAxis.orient("right"));
       
  svg2.selectAll(".layer")
    .attr("opacity", 1)
    .on("mouseover", function(d, i) {
      svg2.selectAll(".layer").transition()
      .duration(250)
      .attr("opacity", function(d, j) {
        return j != i ? 0.6 : 1;
    })})

    .on("mousemove", function(d, i) {
      mousex = d3.mouse(this);
      mousex = mousex[0];
      var invertedx = x.invert(mousex);
      invertedx = invertedx.getMonth() + invertedx.getDay();
      var selected = (d.values);
      for (var k = 0; k < selected.length; k++) {
        datearray[k] = selected[k].date
        datearray[k] = datearray[k].getMonth() + datearray[k].getDay();
      }
     
      mousedate = datearray.indexOf(invertedx);
      
      pro = d.values[mousedate].value;
      dt = d.values[mousedate].date;
      
      d3.select(this)
      .classed("hover", true)
      .attr("stroke", strokecolor)
      .attr("stroke-width", "0.5px"), 
      tooltip.html( "<p>" + d.key + "<br>" + formatMoney(pro) + "<br>" + formatDate(dt) + "</p>" ).style("visibility", "visible");
      
    })
    .on("mouseout", function(d, i) {
     svg2.selectAll(".layer")
      .transition()
      .duration(250)
      .attr("opacity", "1");
      d3.select(this)
      .classed("hover", false)
      .attr("stroke-width", "0px"), tooltip.html( "<p>" + d.key + "<br>" + formatMoney(pro) + "<br>" + formatDate(dt) + "</p>" ).style("visibility", "hidden");
  })
    
  var vertical = d3.select(".chart")
        .append("div")
        .attr("class", "remove")
        .style("position", "absolute")
        .style("z-index", "19")
        .style("width", "1px")
        .style("height", "380px")
        .style("top", "10px")
        .style("bottom", "30px")
        .style("left", "0px")
        .style("background", "#fff");

  d3.select(".chart")
      .on("mousemove", function(){  
         mousex = d3.mouse(this);
         mousex = mousex[0] + 5;
         vertical.style("left", mousex + "px" )})
      .on("mouseover", function(){  
         mousex = d3.mouse(this);
         mousex = mousex[0] + 5;
         vertical.style("left", mousex + "px")});
});
}
</script>




</body>
</html>